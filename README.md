# 3주차 질문

## 질문 1. CORS 에러는 무엇이고 언제 발생하는지 설명해주세요. 이를 해결할 수 있는 방법에 대해서도 설명해주세요.

### CORS 에러란?

CORS는 Cross-Origin Resource Sharing의 줄임말로 교차-출처 리소스 공유하고도 한다. CORS는 보안 메커니즘으로 **동일 출처 정책** 때문에 등장하게 되었다. 동일 출처 정책은 말 그대로 동일한 출처의 리소스에만 접근하도록 제한하는 정책을 말한다.( 여기서 말하는 출처라는것은 프로토콜, 호스트명, 포트가 같다는 것을 의미한다. )

### CORS 해결책

1. Crome 확장 프로그램 이용
   이 방법은 로컬(localhost) 환경에서 API를 테스트 시, CORS 문제를 해결할 수 있다.
2. 서버에서 Access-Control-Allow-Origin 헤더에 허용할 출처를 기재해서 클라이언트에 응답하면 된다...

## 질문 2. 비동기 처리 방법인 callback, promise, async await에 대해 각각 장단점과 함께 설명해주세요.

### callback

- 장점
  - 추가 라이브러리가 필요없다.
- 단점
  - **콜백 지옥**으로 이어질 수 있다.
  - 콜백마다 에러 처리가 필요해 까다롭다.

### promise

- 장점
  - `then`과 `catch` 메서드를 통해 체인 방식으로 처리하기때문에 콜백 지옥을 피할 수 있다.
  - 에러 처리가 간편하다.
- 단점
  - Promise를 사용하면, 함수 호출 스택이 쌓이는 **오버헤드**가 발생할 수 있다. 이는 성능에 영향을 미칠 수 있다.

### async await

- 장점
  - 코드를 동기적으로 작성할 수 있어 가독성이 높다.
  - `try` / `catch` 블록을 사용하여 에러 처리가 직관적이다.
- 단점
  - Promise 객체가 가진 일부 기능을 사용할 수 없는 경우가 있다.
  - 이는 async/await는 Promise 객체를 기반으로 동작하기 때문에, Promise 객체를 생성하고, Promise 객체의 처리 과정을 관리하는 추가적인 작업이 필요하기 때문이다.

## 질문 3. react query의 주요 특징에 대해 설명하고, queryKey는 어떤 역할을 하는지 설명해주세요.

### React Query의 주요 특징

#### React Query는 데이터 Fetching, 캐싱, 동기화, 서버 쪽 데이터 업데이트 등을 쉽게 만들어 주는 React 라이브러리이다.

- **데이터 페칭 및 캐싱**: React Query는 서버 상태를 관리하고, 데이터를 페칭하여 캐싱합니다. 이를 통해 네트워크 요청을 최소화하고, 앱의 성능을 향상시킵니다.
- **자동 리페치**: 데이터가 변경되거나 일정 시간이 지나면 자동으로 데이터를 다시 페칭합니다. 이는 최신 상태를 유지하는 데 유용합니다.
- **에러 처리 및 로딩 상태 관리**: React Query는 데이터 페칭 중 발생하는 에러와 로딩 상태를 자동으로 관리합니다.
- 무한 스크롤 및 페이지네이션 지원: useInfiniteQuery를 사용하여 무한 스크롤 및 페이지네이션을 쉽게 구현할 수 있습니다.
- **데이터 동기화**: 여러 컴포넌트가 동일한 데이터를 구독하고, 데이터가 변경되면 자동으로 업데이트됩니다.

### queryKey의 역할

- **쿼리 식별자**: queryKey는 React Query가 캐시된 데이터를 식별하고 관리하는 데 사용됩니다. 각 쿼리는 고유한 queryKey를 가지며, 이를 통해 캐시된 데이터에 접근하거나 데이터를 업데이트할 수 있습니다.
- **종속성 관리**: queryKey는 데이터 페칭에 필요한 종속성을 관리하는 데 사용됩니다. 예를 들어, ['todos', userId]와 같은 queryKey를 사용하면 특정 사용자에 대한 할 일 목록을 페칭할 때 사용됩니다.
- **자동 리페치 트리거**: queryKey가 변경되면 React Query는 자동으로 데이터를 다시 페칭합니다. 이를 통해 종속성이 변경될 때 최신 데이터를 유지할 수 있습니다.

# 기능 목록

## step 1

- oas.yaml 파일과 목 API URL을 사용해서 API 구현하기
  ### 메인 페이지
  - [x] Theme 카테고리 섹션: `/api/v1/themes` API를 사용하여 Section 구현
  - [x] 실시간 급상승 선물랭킹 섹션 : `api/v1/ranking/products` API를 사용하여 Section 구현
  ### Theme 페이지
  - [x] header : url의 pathParams와 `/api/v1/themes` API를 사용하여 Section을 구현
  - [x] 상품 목록 섹션 : `/api/v1/themes/{themeKey}/products` API를 사용하여 상품 목록을 구현. API 요청 시 한번에 *20개의 상품 목록*이 내려오도록 한다.

## step 2

- [x] 각 API에서 Loading 상태에 대한 UI 대응
- [x] 데이터가 없는 경우에 대한 UI 대응
- [x] Http Status에 따라 Error를 다르게 처리

## step 3

- [x] 스크롤을 내리면 추가로 데이터를 요청하여 보여지게 한다.
- [x] 1단계에서 구현한 API를 react-query를 사용해서 구현
